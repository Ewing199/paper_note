<attachment contentEditable="false" data-atts="%5B%5D" data-aid=".atts-d6492fdd-bf94-4c8a-bc13-a27342062c0f"></attachment>
# 1. 进程与线程
## 进程
>进程是对运行时程序的封装，是系统进行资源调度和分配的的基本单位，实现了**操作系统的并发**
## 线程
> 线程是进程的子任务，是CPU调度和分派的基本单位，用于保证程序的实时性，实现**进程内部的并发**
线程是操作系统可识别的**最小执行和调度单位**

每个线程都**独自**占用一个虚拟处理器：独自的寄存器组，指令计数器和处理器状态
每个线程完成不同的任务，但是**共享**同一地址空间（也就是同样的动态内存，映射文件，目标代码等等），打开的文件队列和其他内核资源。

## 区别
1.线程依赖于进程而存在。一个进程有多个线程，一个线程只属于一个进程
2.进程在执行过程中拥有**独立的内存单元**，而多个线程**共享进程的内存**。但是每个线程拥有自己的栈段，栈段又叫运行时段，用来存放所有**局部变量和临时变量**
3.进程是资源分配的最小单位，线程是CPU调度的最小单位
4.进程系统开销远大于线程------资源分配与回收的原因
5.线程通信，由于共享内存，可以直接通过全局变量的方式
6.进程相互不影响；线程挂掉导致进程挂掉
7.进程适应于多核、多机分布；线程适用于多核

## 进程通信
1.管道
> **普通管道PIPE**：半双工（单向数据流动），只能用于父子进程或兄弟进程，存在内存中的特殊文件（可读写）
**命名管道FIFO**：无关进程间交换数据，存在文件系统中的特殊文件

2.系统IPC
>  消息队列:消息队列，是消息的链接表，存放在内核中。异步处理，主要目的是减少请求响应时间和解耦

> 信号量（semaphore）与已经介绍过的 IPC 结构不同，它是一个计数器，可以用来控制多个进程对共享资源的访问。信号量用于实现进程间的互斥与同步，而不是用于存储进程间通信数据

> 信号signal是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生

> 共享内存（Shared Memory）:它使得多个进程可以访问同一块内存空间，不同进程可以及时看到对方进程中对共享内存中数据得更新。这种方式需要依靠某种同步操作，如互斥锁和信号量等

3.套接字socket
socket也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同主机之间的进程通信

## 线程通信
> 临界区：通过多线程的串行化来访问公共资源或一段代码，速度快，适合控制数据访问；

> 互斥量Synchronized/Lock：采用互斥对象机制，只有拥有互斥对象的线程才有访问公共资源的权限。因为互斥对象只有一个，所以可以保证公共资源不会被多个线程同时访问

> 信号量Semphare：为控制具有有限数量的用户资源而设计的，它允许多个线程在同一时刻去访问同一个资源，但一般需要限制同一时刻访问此资源的最大线程数目

> 事件(信号)，Wait/Notify：通过通知操作的方式来保持多线程同步，还可以方便的实现多线程优先级的比较操作

# 虚拟内存
**虚拟内存技术**使得不同进程在运行过程中，它所看到的是自己独自占有了当前系统的4G内存。所有进程共享同一物理内存，**每个进程只把自己目前需要的虚拟内存空间映射并存储到物理内存上**
**请求分页系统、请求分段系统和请求段页式系统**都是针对虚拟内存的，通过请求实现内存与外存的信息置换。


